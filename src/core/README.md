# Core 모듈

## 개요
`core` 모듈은 프로젝트의 의존성 구조 최하단에서 시스템 전역 공용 데이터 모델과 타입을 정의합니다.

## 주요 구성 요소

### 1. 상수 정의 (`constants.rs`)
프로젝트 전반에서 사용되는 규격 및 설정값들을 중앙 관리합니다.
- **파일 이름**: `AGENTS.md`, `SKILL.md`, `GEMINI.md` 등
- **디렉터리 구조**: `commands`, `agents`, `skills`
- **보안**: `FORBIDDEN_FILES` 상수를 통해 플러그인 내 배포 금지 파일 목록 관리.

### 2. 리소스 정의 (`resource.rs`)
에이전트 리소스의 도메인 모델과 비즈니스 로직을 정의합니다.
- **`Resource`**: `Command`, `Agent`, `Skill` 타입을 지원하는 핵심 열거형입니다.
- **메서드**: `name()`, `plugin()`, `content()`, `metadata()`, `main_source_path()` 등 리소스 속성 접근을 위한 통일된 인터페이스를 제공합니다.

### 3. 데이터 모델 (`model.rs` 및 `target.rs`)
- **`BuildTarget`**: `gemini-cli`, `claude-code`, `opencode` 타겟 정의. 각 타겟별 예약어 키(`reserved_key`)와 전체 예약어 목록을 관리합니다.
- **`MetadataMap`**: `map.yaml`을 표현하는 모델로, 필드 이름과 원본 값을 기반으로 타겟별 치환 값을 정의합니다.
- **`TransformedResource`**: 변환이 완료된 텍스트 파일들과 물리적 복사 대상(`extras`)을 묶은 최종 결과물 모델입니다.

### 4. 파일 필터 (`filter.rs`)
- **`FileFilter`**: 로딩(`loader`)과 동기화(`syncer`) 양쪽에서 공통으로 사용하는 파일 유효성 검사 정책입니다. Glob 패턴 매칭 및 시스템 보호 규칙을 수행합니다.

## 용어 사전 (Glossary)

- **Source (소스)**: `plugins/` 디렉터리 내에 위치한 원본 마스터 라이브러리. 모든 빌드의 기초가 되는 단일 진실 공급원(SSOT)입니다.
- **Target (타겟)**: 빌드 결과물이 배포될 대상 에이전트 환경 또는 해당 플랫폼의 규격.
- **Emit (배포)**: 변환된 리소스를 물리적인 파일로 대상 디렉터리에 작성하거나 복사하는 빌드의 최종 단계입니다.

## 설계 원칙
- **무의존성**: `core` 모듈은 프로젝트 내의 다른 모듈을 참조하지 않습니다.
- **데이터 중심**: 비즈니스 로직보다는 데이터의 구조와 직렬화/역직렬화 규격을 정의하는 데 집중합니다.
