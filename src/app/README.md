# App 모듈

## 개요
`app` 모듈은 `agb` 프로젝트의 실행 컨텍스트를 캡슐화하고 전체 비즈니스 로직을 오케스트레이션하는 최상위 레이어입니다.

## 모듈 구조

- **`mod.rs`**: 애플리케이션의 메인 실행기인 `App` 구조체를 정의하며 전체 흐름을 제어합니다.
- **`cli.rs`**: `clap`을 사용한 CLI 인자(`Cli`) 및 명령어(`Commands`) 규격을 정의합니다.
- **`config.rs`**: `agb.yaml` 파일을 파싱하고 경로 확장(`~`)을 담당하는 설정 모델입니다.
- **`context.rs`**: 애플리케이션 상태와 리소스를 관리하는 `AppContext` 초기화 로직을 정의합니다.

## 주요 구성 요소

### 1. AppContext (`context.rs`)
애플리케이션 실행에 필요한 모든 상태와 리소스를 보유합니다.
- **초기화 (`init`)**: 설정 파일 로드, 소스 디렉터리 스캔을 통한 `Registry` 구축, 타겟별 `Transformer` 준비를 수행합니다.
- **리소스 필터링**: `Config`에 명시된 리소스 식별자(`plugin:name`)와 일치하는 리소스만 선택하여 등록합니다.

### 2. App (`mod.rs`)
사용자의 명령에 따라 적절한 모듈을 호출하는 오케스트레이터입니다.
- **`run(cli)`**: CLI 입력을 받아 `AppContext`를 초기화하고 명령어를 분기합니다.
- **`build(ctx)`**: `builder` 모듈을 호출하여 리소스 변환 및 파일 배포를 수행합니다.
- **`sync(ctx)`**: `syncer` 모듈을 호출하여 타겟의 변경사항을 소스로 동기화합니다.

### 3. Config (`config.rs`)
- **`load_config`**: 설정 파일을 읽어 `Config` 구조체로 변환하고, 사용자 홈 디렉터리 경로를 시스템 절대 경로로 확장합니다.

## 설계 이점
- **관심사 분리**: 실행(App), 상태(Context), 설정(Config), 인터페이스(Cli)를 분리하여 코드 가독성과 유지보수성을 높였습니다.
- **테스트 용이성**: 바이너리 실행 없이도 `App` 및 `AppContext`를 직접 활용한 통합 테스트가 가능합니다.
- **라이브러리 확장성**: 외부 프로젝트에서 `agb`를 라이브러리로 참조하여 고유한 워크플로우를 구축하기 용이합니다.
